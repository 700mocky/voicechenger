# Voice Changer (Virtual Microphone & Discord Bot)

Mac でリアルタイムに声を変換し、Discord などに流すためのツールです。
BlackHole を使った「仮想マイク方式」と、Discord.py (py-cord) を使った「ボット方式」の2つを備えています。

## 機能
- **リアルタイム音声変換**: 高品質な librosa / pyrubberband エンジンを使用。
- **2つのモード**:
  - **仮想マイク方式 (`main.py`)**: 最も安定しており、Discord の全機能（画面共有時など）で利用可能。
  - **ボット方式 (`bot.py`)**: ボイスチャンネルにボットとして参加。
- **簡単操作**: キーボードの数字キー (1-5) でピッチを即座に変更。
- **低遅延・大音量**: Mac の性能に合わせた最適化済み。

## 準備するもの
1. **BlackHole 2ch** (仮想マイク方式に必須)
   ```bash
   brew install blackhole-2ch
   ```
2. **Python ライブラリ**
   ```bash
   pip install -r requirements.txt
   ```

## 使い方（仮想マイク方式 - 推奨）
一番安定していて遅延が少ない方法です。

1. **プログラムの起動**
   ```bash
   python3 main.py
   ```
2. **デバイス設定**
   - 画面の指示に従い、自分のマイク番号を入力。
   - 出力先は自動的に BlackHole に設定されます。
3. **Discord の設定**
   - 設定 ＞ 音声・ビデオ ＞ **入力デバイス** を「BlackHole 2ch」に変更。
4. **操作**
   - `1`: ノーマル
   - `2`: 高い声 (+6)
   - `3`: 低い声 (-6)
   - `4`: 異性の声 (起動時に設定)
   - `5`: カスタムピッチ (数値を直接入力)
   - `q`: 終了

## 使い方（ボット方式）
1. **.env の作成**
   `.env.example` をコピーして `.env` を作り、Discord のボットトークンを貼り付けます。
2. **ボットの起動**
   ```bash
   python3 bot.py
   ```
3. **コマンド**
   - `!join`: 参加
   - `!pitch 12`: ピッチ変更
   - `!leave`: 退出

## トラブルシューティング
- **キーが効かない場合**: Mac の「システム設定 ＞ プライバシー ＞ アクセシビリティ」で、ターミナルの許可を ON にしてください（許可しない場合は、数字 ＋ Enter で操作可能です）。
- **音が小さい場合**: すでに 4倍に増幅していますが、Discord の「入力感度」設定を調整してみてください。

## ライセンス
MIT License
